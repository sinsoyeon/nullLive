<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Board">
	<resultMap type="Board" id="boardResultSet">
		<id property="bno" column="BNO"/>
		<result property="btitle" column="BTITLE"/>
		<result property="bcontent" column="BCONTENT"/>
		<result property="writtenDate" column="WRITTEN_DATE"/>
		<result property="modifyDate" column="MODIFY_DATE"/>
		<result property="bcount" column="BCOUNT"/>
		<result property="btype" column="BTYPE"/>
		<result property="questionType" column="QUESTION_TYPE"/>
		<result property="refBno" column="refBno"/>
		<result property="bemail" column="B_EMAIL"/>
		<result property="bbno" column="BBNO"/>
		<result property="bwriter" column="BWRITER"/>
		<result property="reportType" column="REPORT_TYPE"/>
		<result property="isQr" column="IS_QR"/>
		<result property="reportMno" column="REPORT_MNO"/>
		<result property="bStatus" column="B_STATUS"/>
	</resultMap>
	<select id="" resultMap="boardResultSet">
	</select>
	
	<!-- 구인구직 공지사항 INSERT -->
	<insert id="insertJobNotice" parameterType="Board">
		INSERT INTO 
		BOARD(BNO,		 BTITLE,   BCONTENT,   WRITTEN_DATE,MODIFY_DATE,BCOUNT,   BTYPE,   BWRITER,B_STATUS) VALUES
		(SEQ_BNO.NEXTVAL,#{btitle},#{bcontent},SYSDATE,		SYSDATE,	DEFAULT,  #{btype},#{bwriter},1)
	</insert>
	<!-- 구인구직 공지사항 목록 조회 -->
	<select id="selectListJobNotice" resultMap="boardResultSet">
		SELECT * 
		FROM BOARD
		WHERE BTYPE='구인구직공지'
		AND B_STATUS = '1'
	</select>
	<!-- 구인구직 공지사항 상세조회 -->
	<select id="selectOneJobNotice" resultMap="boardResultSet">
		SELECT * 
		FROM BOARD
		WHERE BTYPE='구인구직공지'
		AND B_STATUS = '1'
		AND BNO = #{bno}
	</select>
	<!-- 게시물 조회수 증가용 -->
	<update id="updateBoardCount" parameterType="_int">
		UPDATE BOARD SET BCOUNT = (SELECT BCOUNT FROM BOARD WHERE BNO = #{bno}) + 1
		WHERE BNO = #{bno}
	</update>
	<!-- 게시물 갯수 조회용 -->
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
		WHERE B_STATUS = '1'
	</select>
	
	
</mapper>